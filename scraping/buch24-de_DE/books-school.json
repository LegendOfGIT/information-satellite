{
  "site": "buch24.de",

  "scraping": [
    {
      "comment": "site",
      "commandId": "set-context-value",
      "parameters": {
        "contextId": "site",
        "value": "buch24-de_DE"
      }
    },
    {
      "comment": "locale",
      "commandId": "set-context-value",
      "parameters": {
        "contextId": "locale",
        "value": "de-DE"
      }
    },
    {
      "comment": "usecase",
      "commandId": "set-context-value",
      "parameters": {
        "contextId": "usecase",
        "value": "single-item"
      }
    },
    {
      "comment": "navigation-path",
      "commandId": "set-context-value",
      "parameters": {
        "contextId": "navigation-path",
        "value": [
          "MULTIMEDIA",
          "MULTIMEDIA_BOOKS",
          "MULTIMEDIA_BOOKS_SCHOOLBOOKS"
        ]
      }
    },

    {
      "comment": "random-product-offset",
      "commandId": "generate-random-number",
      "parameters": {
        "contextId": "random-product-offset",
        "maximum": "50"
      }
    },
    {
      "comment": "product-overview",
      "commandId": "visit-uri",
      "parameters": {
        "contextId": "product-overview",
        "uri": "https://{template.site}/shopdirekt.cgi?id=20543&p=2&t=&h=&kid=0&klid=2&nav=20505_26175_20530_20543&offset={random-product-offset}"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "get-values-by-css-queries",
      "parameters": {
        "contextId": "product-ids",
        "css-queries": [ ".products-grid .product-item a"],
        "attribute-id": "href",
        "sourceContextId": "product-overview"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "clone-items-and-modify-clones",
      "parameters": {
        "contextId": "product-ids",
        "replacements": {
          ".*?(\\?|&)id=": "",
          "&.*": ""
        },
        "sourceContextId": "product-ids"
      }
    },

    {
      "comment": "observe scraped information",
      "commandId": "observe-information",
      "parameters": {
        "informationIds": [
          "locale",
          "navigation-path",
          "product-ids",
          "site",
          "usecase"
        ]
      }
    },

    {
      "comment": "random-product-offset",
      "commandId": "generate-random-number",
      "parameters": {
        "contextId": "random-product-offset",
        "maximum": "50"
      }
    },
    {
      "comment": "product-overview",
      "commandId": "visit-uri",
      "parameters": {
        "contextId": "product-overview",
        "overwrite": true,
        "uri": "https://{template.site}/shopdirekt.cgi?id=20506&p=2&t=&h=&kid=0&klid=2&nav=20505_26175_20530_20506&offset={random-product-offset}"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "get-values-by-css-queries",
      "parameters": {
        "contextId": "product-ids",
        "css-queries": [ ".products-grid .product-item a"],
        "attribute-id": "href",
        "overwriteValues": true,
        "sourceContextId": "product-overview"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "clone-items-and-modify-clones",
      "parameters": {
        "contextId": "product-ids",
        "replacements": {
          ".*?(\\?|&)id=": "",
          "&.*": ""
        },
        "sourceContextId": "product-ids"
      }
    },

    {
      "comment": "observe scraped information",
      "commandId": "observe-information",
      "parameters": {
        "informationIds": [
          "locale",
          "navigation-path",
          "product-ids",
          "site",
          "usecase"
        ]
      }
    },

    {
      "comment": "random-product-offset",
      "commandId": "generate-random-number",
      "parameters": {
        "contextId": "random-product-offset",
        "maximum": "50"
      }
    },
    {
      "comment": "product-overview",
      "commandId": "visit-uri",
      "parameters": {
        "contextId": "product-overview",
        "overwrite": true,
        "uri": "https://{template.site}/shopdirekt.cgi?id=23579&p=2&t=&h=&kid=0&klid=2&nav=2928_1477_20505_26175_20530_23579&offset={random-product-offset}"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "get-values-by-css-queries",
      "parameters": {
        "contextId": "product-ids",
        "css-queries": [ ".products-grid .product-item a"],
        "attribute-id": "href",
        "overwriteValues": true,
        "sourceContextId": "product-overview"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "clone-items-and-modify-clones",
      "parameters": {
        "contextId": "product-ids",
        "replacements": {
          ".*?(\\?|&)id=": "",
          "&.*": ""
        },
        "sourceContextId": "product-ids"
      }
    },

    {
      "comment": "observe scraped information",
      "commandId": "observe-information",
      "parameters": {
        "informationIds": [
          "locale",
          "navigation-path",
          "product-ids",
          "site",
          "usecase"
        ]
      }
    },

    {
      "comment": "random-product-offset",
      "commandId": "generate-random-number",
      "parameters": {
        "contextId": "random-product-offset",
        "maximum": "50"
      }
    },
    {
      "comment": "product-overview",
      "commandId": "visit-uri",
      "parameters": {
        "contextId": "product-overview",
        "overwrite": true,
        "uri": "https://{template.site}/shopdirekt.cgi?id=23606&p=2&t=&h=&kid=0&klid=2&nav=2928_1477_20505_26175_20530_23606&offset={random-product-offset}"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "get-values-by-css-queries",
      "parameters": {
        "contextId": "product-ids",
        "css-queries": [ ".products-grid .product-item a"],
        "attribute-id": "href",
        "overwriteValues": true,
        "sourceContextId": "product-overview"
      }
    },
    {
      "comment": "product-ids",
      "commandId": "clone-items-and-modify-clones",
      "parameters": {
        "contextId": "product-ids",
        "replacements": {
          ".*?(\\?|&)id=": "",
          "&.*": ""
        },
        "sourceContextId": "product-ids"
      }
    },

    {
      "comment": "observe scraped information",
      "commandId": "observe-information",
      "parameters": {
        "informationIds": [
          "locale",
          "navigation-path",
          "product-ids",
          "site",
          "usecase"
        ]
      }
    }
  ]
}
